modules:
  # Admin configuration panel - UI Kit React
  jira:adminPage:
    - key: pit-stop-admin
      resource: admin-ui-resource
      resolver:
        function: admin-ui-resolver
      title: Pit Stop Configuration

  # Existing triggers
  trigger:
    - key: comment-created-trigger
      function: comment-handler
      events:
        - avi:jira:commented:issue

  scheduledTrigger:
    - key: scheduled-stall-scanner
      function: stall-scanner
      interval: fiveMinute

  # Functions
  function:
    - key: comment-handler
      handler: index.handleComment

    - key: stall-scanner
      handler: scanner.scanForStalledIssues
      timeoutSeconds: 300

    - key: admin-ui-resolver
      handler: adminResolver.handler

# Resources - UI Kit React
resources:
  - key: admin-ui-resource
    path: src/frontend

app:
  id: ari:cloud:ecosystem::app/af96b1ef-efea-4eb7-b1f2-6fa71d8b810e
  runtime:
    name: nodejs22.x

permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:comment:jira
    - write:comment:jira
    - read:jira-user
    - storage:app
  external:
    fetch:
      backend:
        - address: "*.atlassian.com"
